import{_ as S,u as K,j as ae,E as F,k as X,a as P,b as ne,l as oe,h as le,i as re}from"./meta.Okm9vfaK.js";import{g as E,o as n,c as r,d as f,a as k,t as _,b as v,w as I,h as e,C as q,r as c,E as ie,k as O,f as T,s as A,z as U,B as J,F as B,j as ue,m as D,K as ce,H as Q,D as de,x as fe,S as me,u as pe,O as ve}from"./entry.yZmcPIhL.js";import{u as he,i as _e,a as ye,b as ke,c as we,d as be,B as $e,p as G,S as De,_ as xe,e as ge}from"./AADescription.hdBstfR5.js";import"./nuxt-link.CJOVtHHj.js";const Oe={key:0},Ie=k("span",{class:"font-bold"},"Bytes",-1),He={key:1},Ne={class:"font-bold"},Re={key:0},Ce=["href"],Le={key:1},Se={key:2},We={class:"font-bold"},Pe={__name:"NameBlock",props:["assetUnit","name","url","urlName"],setup(a){const{t:s}=E();return(i,w)=>a.assetUnit==="bytes"?(n(),r("div",Oe,[Ie,f(" - native asset")])):a.name?(n(),r("div",He,[k("span",Ne,_(a.name),1),a.url?(n(),r("span",Re,[f(" - view on "),k("a",{href:a.url,target:"_blank",class:"link link-hover text-blue-500"},_(a.urlName),9,Ce),f(" and "),v(S,{type:"unit",link:a.assetUnit},{default:I(()=>[f(_(e(s)("labelDefinition").toLowerCase()),1)]),_:1},8,["link"])])):(n(),r("span",Le,[f(" - view "),v(S,{type:"unit",link:a.assetUnit},{default:I(()=>[f(_(e(s)("labelDefinition").toLowerCase()),1)]),_:1},8,["link"])]))])):(n(),r("div",Se,[k("span",We,_(a.assetUnit),1),f(" - view "),v(S,{type:"unit",link:a.assetUnit},{default:I(()=>[f(_(e(s)("labelDefinition").toLowerCase()),1)]),_:1},8,["link"])]))}},Ae={__name:"HoldersChart",props:["name","symbol","data"],setup(a,{expose:s}){he([_e,ye,ke,we,be]);const i=a,w=q(),{width:u}=K(),o=c(),h=c(!1),x=c({tooltip:{trigger:"item",position:"top",formatter:function(m){return`${m.data.name}<br/>${ae(m.data.value)} ${i.symbol} (${m.percent}%)`}},series:[{name:i.name,type:"pie",radius:"80%",minShowLabelAngle:4,cursor:"default",data:i.data,label:{cursor:"default"},emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]});function $(){o.value.resize()}function H(m){const{name:l,event:p}=m;if(p.target.type==="tspan"){if(l==="Others"){o.value.chart.getZr().setCursorStyle("default");return}o.value.chart.getZr().setCursorStyle("pointer")}}function y(m){const{name:l,event:p}=m;p.target.type!=="tspan"||l==="Others"||w.push(`/address/${l}`)}function g(){o.value.setOption({series:[{radius:"50%"}]})}function t(){o.value.setOption({series:[{radius:"80%"}]})}return ie(()=>{if(h.value)return g();t()}),O(u,()=>{u.value>640&&h.value?h.value=!1:u.value<=640&&!h.value&&(h.value=!0)},{immediate:!0}),O(h,()=>{if(o.value){if(h.value)return g();t()}}),s({resize:$}),(m,l)=>(n(),T(e($e),{ref_key:"chart",ref:o,class:"chart",option:e(x),onMousemove:H,onClick:y},null,8,["option"]))}};async function Fe(a,s,i){const{wsConnected:w}=A(U());return w.value?(i.asset=s,new Promise(u=>{a.emit(F.LoadNextPageAssetHolders,i,u)})):await $fetch(`${J}/api/asset/${s}/next_page_holders`,{params:i})}const Be={class:"list-decimal list-inside"},Ee={__name:"ListHolders",props:["holders","symbol","asset","decimals","endHolders","offsetForHolders","typeOfHolders","supply"],setup(a){const s=a,{$socket:i}=Q(),{t:w}=E(),u=c([]),o=c(!1),h=c(0),x=c([]),$=c(),{width:H}=X($);function y(l){const p=[];let b=0,C=!1;const W=s.decimals||0;return l.length>20&&(l=l.slice(0,20),C=!0),l.forEach(L=>{const N=L.balance/10**W;b+=N,p.push({value:N,name:L.address})}),C&&p.push({value:s.supply-b,name:"Others"}),p}function g(){x.value=[],o.value=s.endHolders,h.value=s.offsetForHolders,u.value=[...s.holders],x.value=y(s.holders)}g(),O(H,()=>{$.value&&$.value.resize()});function t(l){o.value=l.end,h.value+=l.holders.length,u.value=[...u.value,...l.holders]}async function m(){const l=await Fe(i,s.asset,{type:s.typeOfHolders,offset:h.value});t(l)}return(l,p)=>(n(),r("div",null,[v(Ae,{ref_key:"chart",ref:$,class:"h-96 w-full py-8",data:e(x),name:"Holders",symbol:a.symbol},null,8,["data","symbol"]),v(ne,{title:e(w)("holders"),closed:!0},{default:I(()=>[ce([e(u)],()=>(n(),r("div",{class:"grid gap-1"},[k("ul",Be,[(n(!0),r(B,null,ue(e(u),b=>(n(),r("li",{key:b.address},[v(S,{type:"address",link:b.address},{default:I(()=>[f(_(b.address),1)]),_:2},1032,["link"]),f(" Â ("),v(P,{amount:b.balance,decimals:a.decimals,"is-asset":!0},null,8,["amount","decimals"]),f(" "+_(a.symbol)+") ",1)]))),128))]),e(o)?D("",!0):(n(),r("a",{key:0,class:"link link-hover text-blue-500 mt-2",onClick:m},_(e(w)("showMoreHolders")),1))])),p,0)]),_:1},8,["title"])]))}};async function Z(a,s,i){const{wsConnected:w}=A(U());let u="info";return i&&(u="next_page_transactions"),w.value?new Promise(o=>{if(u==="next_page_transactions"){i.asset=s,a.emit(F.LoadNextPageAssetTransactions,i,o);return}a.emit(F.GetAssetData,{asset:s},o)}):await $fetch(`${J}/api/asset/${encodeURIComponent(s)}/${u}`,{params:{...i}})}const Te={class:"w-full bg-white absolute h-full p-4",style:{"z-index":"1100"}},Ue={class:"text-right"},ze={key:0,class:"text-center"},Me={key:1,class:"mt-14 text-center"},je={key:2},Ve={class:"mt-10"},Ge={key:0,class:"mt-1"},Ze={key:0},Ke={class:"mt-4"},Xe={key:1,class:"mt-1"},qe={key:1,class:"mt-4"},Je={key:2,class:"text-center font-bold pt-8"},Qe={__name:"Asset",async setup(a){let s,i;const{$socket:w}=Q(),u=q(),o=de(),{lastUnit:h,view:x}=A(U()),{rates:$}=A(fe()),{t:H}=E(),y=c(!1),g=c({}),t=c({}),m=c(!1),l=c({lastInputsROWID:0,lastOutputsROWID:0}),p=c(!0),b=c(!1),C=c(null),W=c(null),{height:L}=K(),{height:N}=X(W),{y:z}=oe(),M=c(o.params.asset),R=me(()=>`${!m.value&&t.value.name?`Token ${t.value.name} transactions and holders | `:""}${le}`);pe({title:R,meta:[{name:"description",content:R},{name:"og:title",content:R},{name:"og:description",content:R},{name:"twitter:title",content:R},{name:"twitter:description",content:R}]});function Y(d){if(g.value=d,p.value=!0,b.value=!1,d.notFound){M.value=o.params.asset,m.value=!0,y.value=!0;return}if(t.value=G(d,$),y.value=!0,y.value=!0,M.value=d.name,t.value.isPrivate){p.value=!1;return}l.value={lastInputsROWID:d.transactionsData.newLastInputsROWID,lastOutputsROWID:d.transactionsData.newLastOutputsROWID}}async function j(){if(!o.params.asset)return;y.value=!1;const d=await Z(w,o.params.asset);Y(d)}function ee(d){b.value=d.end,l.value={lastInputsROWID:d.transactionsData.newLastInputsROWID,lastOutputsROWID:d.transactionsData.newLastOutputsROWID},C.value.addNewTransactions(d.transactionsData.unitAssets,d.transactionsData.objTransactions),p.value=!0}async function V(){if(b.value)return;p.value=!1;const d=await Z(w,o.params.asset,{lastInputsROWID:l.value.lastInputsROWID,lastOutputsROWID:l.value.lastOutputsROWID});ee(d)}O(z,()=>{z.value+L.value+100>=N.value&&y.value&&p.value&&!m.value&&V()}),O(N,()=>{y.value&&p.value&&N.value<L.value&&!m.value&&V()}),O($,()=>{y.value&&(t.value=G(g.value,$))}),[s,i]=ve(()=>j()),await s,i(),O(()=>o.params.asset,j);function te(){return h.value?u.push({path:"/"+h.value}):u.push({path:"/"})}return(d,Ye)=>{const se=re;return n(),r("div",Te,[k("div",{class:"max-w-6xl mx-auto w-full text-sm md:text-base",ref_key:"el",ref:W},[k("div",Ue,[k("a",{onClick:te,class:"link link-hover text-blue-500"},_(e(H)("closeButton")),1)]),e(y)?D("",!0):(n(),r("div",ze,[v(De,{class:"w-20 h-20 inline-block"})])),e(m)?(n(),r("div",Me,"No transactions were found for this asset")):e(y)?(n(),r("div",je,[k("div",Ve,[v(Pe,{"asset-unit":e(t).assetUnit,name:e(t).name,url:e(t).url,"url-name":e(t).urlName},null,8,["asset-unit","name","url","url-name"])]),e(t).assetInfo?(n(),r("div",Ge,[e(t).assetInfo.assetDescription?(n(),r("div",Ze,_(e(t).assetInfo.assetDescription),1)):D("",!0),k("div",Ke,[f(" Author: "),v(S,{type:"address",link:e(t).assetInfo.author},{default:I(()=>[f(_(e(t).assetInfo.author),1)]),_:1},8,["link"])]),e(t).assetInfo.authorDefinition?(n(),r("div",Xe,[v(se,null,{default:I(()=>[v(xe,{definition:e(t).assetInfo.authorDefinition},null,8,["definition"])]),_:1})])):D("",!0)])):D("",!0),e(t).supply?(n(),r("div",qe,[k("div",null,[f(" Total supply: "),v(P,{amount:e(t).supply,"is-asset":!0},null,8,["amount"]),f(_(e(t).name),1)]),e(t).dollarPrice?(n(),r(B,{key:0},[k("div",null,[f(" Price: "),v(P,{amount:Number(e(t).dollarPrice.toPrecision(6)),"is-asset":!0,"show-dollar":!0},null,8,["amount"])]),k("div",null,[f(" Marketcap: "),v(P,{amount:Number(e(t).marketCap.toFixed(2)),"is-asset":!0,"show-dollar":!0},null,8,["amount"])])],64)):D("",!0)])):D("",!0),e(t).isPrivate?(n(),r("div",Je,_(e(H)("infoAboutPrivateAsset")),1)):(n(),r(B,{key:3},[e(t).holders.length?(n(),T(Ee,{key:0,class:"mt-4",holders:e(t).holders,symbol:e(t).name,asset:e(o).params.asset,decimals:e(t).decimals,"end-holders":e(t).endHolders,"offset-for-holders":e(t).offsetForHolders,"type-of-holders":e(t).typeOfHolders,supply:e(t).supply},null,8,["holders","symbol","asset","decimals","end-holders","offset-for-holders","type-of-holders","supply"])):D("",!0),v(ge,{class:"mt-12",ref_key:"PL",ref:C,"unit-assets":e(t).transactionsData.unitAssets,"obj-transactions":e(t).transactionsData.objTransactions,address:null,view:e(x)},null,8,["unit-assets","obj-transactions","view"])],64))])):D("",!0)],512)])}}},nt={__name:"[asset]",setup(a){return(s,i)=>(n(),T(Qe))}};export{nt as default};
