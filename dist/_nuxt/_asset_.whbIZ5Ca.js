import{g as T,o,c,d as p,a as w,t as k,b as _,w as L,h as e,C as K,r as i,E as se,k as D,f as E,s as A,z as U,B as X,F,j as ae,m as N,K as ne,H as q,D as le,x as oe,T as re,u as ue,O as ie}from"./entry.BCmlkwnc.js";import{_ as W,u as J,i as ce,E as B,j as Q,a as P,b as de,k as fe,h as me}from"./meta.lVxT3vs8.js";import{u as pe,i as ve,a as he,b as _e,c as ye,d as we,B as ke,p as G,S as be,_ as $e}from"./Spinner.z74WhtTp.js";import"./nuxt-link._ssZLHl5.js";const ge={key:0},xe=w("span",{class:"font-bold"},"Bytes",-1),De={key:1},Oe={class:"font-bold"},He={key:0},Ie=["href"],Ne={key:1},Re={key:2},Ce={class:"font-bold"},Le={__name:"NameBlock",props:["assetUnit","name","url","urlName"],setup(a){const{t:s}=T();return(r,y)=>a.assetUnit==="bytes"?(o(),c("div",ge,[xe,p(" - native asset")])):a.name?(o(),c("div",De,[w("span",Oe,k(a.name),1),a.url?(o(),c("span",He,[p(" - view on "),w("a",{href:a.url,target:"_blank",class:"link link-hover text-blue-500"},k(a.urlName),9,Ie),p(" and "),_(W,{type:"unit",link:a.assetUnit},{default:L(()=>[p(k(e(s)("labelDefinition").toLowerCase()),1)]),_:1},8,["link"])])):(o(),c("span",Ne,[p(" - view "),_(W,{type:"unit",link:a.assetUnit},{default:L(()=>[p(k(e(s)("labelDefinition").toLowerCase()),1)]),_:1},8,["link"])]))])):(o(),c("div",Re,[w("span",Ce,k(a.assetUnit),1),p(" - view "),_(W,{type:"unit",link:a.assetUnit},{default:L(()=>[p(k(e(s)("labelDefinition").toLowerCase()),1)]),_:1},8,["link"])]))}},Se={__name:"HoldersChart",props:["name","symbol","data"],setup(a,{expose:s}){pe([ve,he,_e,ye,we]);const r=a,y=K(),{width:u}=J(),n=i(),v=i(!1),g=i({tooltip:{trigger:"item",position:"top",formatter:function(f){return`${f.data.name}<br/>${ce(f.data.value)} ${r.symbol} (${f.percent}%)`}},series:[{name:r.name,type:"pie",radius:"80%",minShowLabelAngle:4,cursor:"default",data:r.data,label:{cursor:"default"},emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]});function $(){n.value.resize()}function O(f){const{name:l,event:m}=f;if(m.target.type==="tspan"){if(l==="Others"){n.value.chart.getZr().setCursorStyle("default");return}n.value.chart.getZr().setCursorStyle("pointer")}}function h(f){const{name:l,event:m}=f;m.target.type!=="tspan"||l==="Others"||y.push(`/address/${l}`)}function x(){n.value.setOption({series:[{radius:"50%"}]})}function t(){n.value.setOption({series:[{radius:"80%"}]})}return se(()=>{if(v.value)return x();t()}),D(u,()=>{u.value>640&&v.value?v.value=!1:u.value<=640&&!v.value&&(v.value=!0)},{immediate:!0}),D(v,()=>{if(n.value){if(v.value)return x();t()}}),s({resize:$}),(f,l)=>(o(),E(e(ke),{ref_key:"chart",ref:n,class:"chart",option:e(g),onMousemove:O,onClick:h},null,8,["option"]))}};async function We(a,s,r){const{wsConnected:y}=A(U());return y.value?(r.asset=s,new Promise(u=>{a.emit(B.LoadNextPageAssetHolders,r,u)})):await $fetch(`${X}/api/asset/${s}/next_page_holders`,{params:r})}const Pe={class:"list-decimal list-inside"},Ae={__name:"ListHolders",props:["holders","symbol","asset","decimals","endHolders","offsetForHolders","typeOfHolders","supply"],setup(a){const s=a,{$socket:r}=q(),{t:y}=T(),u=i([]),n=i(!1),v=i(0),g=i([]),$=i(),{width:O}=Q($);function h(l){const m=[];let b=0,R=!1;const S=s.decimals||0;return l.length>20&&(l=l.slice(0,20),R=!0),l.forEach(C=>{const H=C.balance/10**S;b+=H,m.push({value:H,name:C.address})}),R&&m.push({value:s.supply-b,name:"Others"}),m}function x(){g.value=[],n.value=s.endHolders,v.value=s.offsetForHolders,u.value=[...s.holders],g.value=h(s.holders)}x(),D(O,()=>{$.value&&$.value.resize()});function t(l){n.value=l.end,v.value+=l.holders.length,u.value=[...u.value,...l.holders]}async function f(){const l=await We(r,s.asset,{type:s.typeOfHolders,offset:v.value});t(l)}return(l,m)=>(o(),c("div",null,[_(Se,{ref_key:"chart",ref:$,class:"h-96 w-full py-8",data:e(g),name:"Holders",symbol:a.symbol},null,8,["data","symbol"]),_(de,{title:e(y)("holders"),closed:!0},{default:L(()=>[ne([e(u)],()=>(o(),c("div",{class:"grid gap-1"},[w("ul",Pe,[(o(!0),c(F,null,ae(e(u),b=>(o(),c("li",{key:b.address},[_(W,{type:"address",link:b.address},{default:L(()=>[p(k(b.address),1)]),_:2},1032,["link"]),p(" Â ("),_(P,{amount:b.balance,decimals:a.decimals,"is-asset":!0},null,8,["amount","decimals"]),p(" "+k(a.symbol)+") ",1)]))),128))]),e(n)?N("",!0):(o(),c("a",{key:0,class:"link link-hover text-blue-500 mt-2",onClick:f},k(e(y)("showMoreHolders")),1))])),m,0)]),_:1},8,["title"])]))}};async function Z(a,s,r){const{wsConnected:y}=A(U());let u="info";return r&&(u="next_page_transactions"),y.value?new Promise(n=>{if(u==="next_page_transactions"){r.asset=s,a.emit(B.LoadNextPageAssetTransactions,r,n);return}a.emit(B.GetAssetData,{asset:s},n)}):await $fetch(`${X}/api/asset/${encodeURIComponent(s)}/${u}`,{params:{...r}})}const Fe={class:"w-full bg-white absolute h-full p-4",style:{"z-index":"1100"}},Be={class:"text-right"},Te={key:0,class:"text-center"},Ee={key:1,class:"mt-14 text-center"},Ue={key:2},ze={class:"mt-10"},Me={key:0,class:"mt-4"},je={key:1,class:"text-center font-bold pt-8"},Ve={__name:"Asset",async setup(a){let s,r;const{$socket:y}=q(),u=K(),n=le(),{lastUnit:v,view:g}=A(U()),{rates:$}=A(oe()),{t:O}=T(),h=i(!1),x=i({}),t=i({}),f=i(!1),l=i({lastInputsROWID:0,lastOutputsROWID:0}),m=i(!0),b=i(!1),R=i(null),S=i(null),{height:C}=J(),{height:H}=Q(S),{y:z}=fe(),M=i(n.params.asset),I=re(()=>`${!f.value&&t.value.name?`Token ${t.value.name} transactions and holders | `:""}${me}`);ue({title:I,meta:[{name:"description",content:I},{name:"og:title",content:I},{name:"og:description",content:I},{name:"twitter:title",content:I},{name:"twitter:description",content:I}]});function Y(d){if(x.value=d,m.value=!0,b.value=!1,d.notFound){M.value=n.params.asset,f.value=!0,h.value=!0;return}if(t.value=G(d,$),h.value=!0,h.value=!0,M.value=d.name,t.value.isPrivate){m.value=!1;return}l.value={lastInputsROWID:d.transactionsData.newLastInputsROWID,lastOutputsROWID:d.transactionsData.newLastOutputsROWID}}async function j(){if(!n.params.asset)return;h.value=!1;const d=await Z(y,n.params.asset);Y(d)}function ee(d){b.value=d.end,l.value={lastInputsROWID:d.transactionsData.newLastInputsROWID,lastOutputsROWID:d.transactionsData.newLastOutputsROWID},R.value.addNewTransactions(d.transactionsData.unitAssets,d.transactionsData.objTransactions),m.value=!0}async function V(){if(b.value)return;m.value=!1;const d=await Z(y,n.params.asset,{lastInputsROWID:l.value.lastInputsROWID,lastOutputsROWID:l.value.lastOutputsROWID});ee(d)}D(z,()=>{z.value+C.value+100>=H.value&&h.value&&m.value&&!f.value&&V()}),D(H,()=>{h.value&&m.value&&H.value<C.value&&!f.value&&V()}),D($,()=>{h.value&&(t.value=G(x.value,$))}),[s,r]=ie(()=>j()),await s,r(),D(()=>n.params.asset,j);function te(){return v.value?u.push({path:"/"+v.value}):u.push({path:"/"})}return(d,Ge)=>(o(),c("div",Fe,[w("div",{class:"max-w-6xl mx-auto w-full text-sm md:text-base",ref_key:"el",ref:S},[w("div",Be,[w("a",{onClick:te,class:"link link-hover text-blue-500"},k(e(O)("closeButton")),1)]),e(h)?N("",!0):(o(),c("div",Te,[_(be,{class:"w-20 h-20 inline-block"})])),e(f)?(o(),c("div",Ee,"No transactions were found for this asset")):e(h)?(o(),c("div",Ue,[w("div",ze,[_(Le,{"asset-unit":e(t).assetUnit,name:e(t).name,url:e(t).url,"url-name":e(t).urlName},null,8,["asset-unit","name","url","url-name"])]),e(t).supply?(o(),c("div",Me,[w("div",null,[p(" Total supply: "),_(P,{amount:e(t).supply,"is-asset":!0},null,8,["amount"]),p(k(e(t).name),1)]),e(t).dollarPrice?(o(),c(F,{key:0},[w("div",null,[p(" Price: "),_(P,{amount:Number(e(t).dollarPrice.toPrecision(6)),"is-asset":!0,"show-dollar":!0},null,8,["amount"])]),w("div",null,[p(" Marketcap: "),_(P,{amount:Number(e(t).marketCap.toFixed(2)),"is-asset":!0,"show-dollar":!0},null,8,["amount"])])],64)):N("",!0)])):N("",!0),e(t).isPrivate?(o(),c("div",je,k(e(O)("infoAboutPrivateAsset")),1)):(o(),c(F,{key:2},[e(t).holders.length?(o(),E(Ae,{key:0,class:"mt-4",holders:e(t).holders,symbol:e(t).name,asset:e(n).params.asset,decimals:e(t).decimals,"end-holders":e(t).endHolders,"offset-for-holders":e(t).offsetForHolders,"type-of-holders":e(t).typeOfHolders,supply:e(t).supply},null,8,["holders","symbol","asset","decimals","end-holders","offset-for-holders","type-of-holders","supply"])):N("",!0),_($e,{class:"mt-12",ref_key:"PL",ref:R,"unit-assets":e(t).transactionsData.unitAssets,"obj-transactions":e(t).transactionsData.objTransactions,address:null,view:e(g)},null,8,["unit-assets","obj-transactions","view"])],64))])):N("",!0)],512)]))}},Je={__name:"[asset]",setup(a){return(s,r)=>(o(),E(Ve))}};export{Je as default};
